# (c) Copyright 2025 Zenseact AB
# SPDX-License-Identifier: Apache-2.0

nodes:
  N_Term:
    base: N_Node
    transitions:
      T_Null: N_Node
  N_Descr:
    base: N_Term
    transitions:
      T_Description: N_Term
  N_Post:
    base: N_Descr
    transitions:
      T_PostRun: N_Descr
  N_Pre:
    base: N_Post
    transitions:
      T_PreRun: N_Post
  N_ParamTable:
    base: N_Pre
    transitions:
      T_ParamRow: N_ParamTable
      T_Zip: N_ParamTable
      T_Prod: N_ParamTable
  N_Param:
    base: N_Pre
    transitions:
      T_Zip: N_ParamTable
      T_Prod: N_ParamTable
  N_TestTable:
    base: N_Param
    transitions:
      T_TestRow: N_TestTable
      T_TestComment: N_TestTable
  N_Test:
    base: N_Node
    transitions:
      T_Test: N_TestTable
  N_Channel:
    base: N_Test
    transitions:
      T_InjectTo: N_KindIn
      T_ObserveOn: N_KindOut
  N_ChannelOut:
    base: N_Test
    transitions:
      T_ObserveOn: N_KindOut
  N_CombineOut:
    base: N_Channel
    transitions:
      T_Union: N_KindOut
      T_With: N_KindOut

  N_EndIn:
    base: N_Channel
    transitions:
      T_Keep: N_Channel
  N_EndOut:
    base: N_CombineOut
    transitions:
      T_Expect: N_ChannelOut # terminate combo

  N_AliasIn:
    base: N_EndIn
    transitions:
      T_Alias: N_EndIn
  N_AliasOut:
    base: N_EndOut
    transitions:
      T_Alias: N_EndOut

  N_CallFilter:
    base: N_AliasOut
    transitions:
      T_CallFilter: N_AliasOut
  N_DecorIn:
    base: N_AliasIn
    transitions:
      T_As: N_AliasIn
  N_DecorOut:
    base: N_CallFilter
    transitions:
      T_As: N_CallFilter
  N_KindIn:
    base: N_DecorIn
    transitions:
      T_SignalFilter: N_DecorIn
  N_KindOut:
    base: N_DecorOut
    transitions:
      T_SignalFilter: N_DecorOut
      T_SignalProperty: N_CallFilter
      T_CallCount: N_AliasOut
  N_Repeat:
    base: N_Channel
    transitions:
      T_Repeat: N_Channel
  N_Main:
    base: ModelDefinition
    transitions:
      T_OnTrigger: N_Repeat
