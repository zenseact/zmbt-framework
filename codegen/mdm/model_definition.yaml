# (c) Copyright 2025 Zenseact AB
# SPDX-License-Identifier: Apache-2.0

nodes:
  N_Descr:        { base: N_Term,         trans: { T_Description:     N_Term          } }
  N_Post:         { base: N_Descr,        trans: { T_PostRun:         N_Descr         } }
  N_Pre:          { base: N_Post,         trans: { T_PreRun:          N_Post          } }
  N_ParamTable:   { base: N_Pre,          trans: { T_ParamRow:        N_ParamTable    ,
                                                   T_Zip:             N_ParamTable    ,
                                                   T_Prod:            N_ParamTable    } }
  N_Param:        { base: N_Pre,          trans: { T_Zip:             N_ParamTable    ,
                                                   T_Prod:            N_ParamTable    ,
                                                   T_Pairwise:        N_ParamTable    ,
                                                   T_Parametrize:     N_Param         } }
  N_TestTable:    { base: N_Param,        trans: { T_TestRow:         N_TestTable     ,
                                                   T_TestComment:     N_TestTable     } }
  N_Test:         { base: N_Param,        trans: { T_Test:            N_TestTable     } }
  N_MaybeChannel: { base: N_Test,         trans: { T_At:              N_Filter        } }
  N_ContinuePipe: { base: null  ,         trans: { T_At:              N_Filter        } }
  N_ChannelEnd:   { base: null,           trans: { T_Inject:          N_MaybeChannel  ,
                                                   T_Expect:          N_MaybeChannel  ,
                                                   T_Group:           N_ContinuePipe  ,
                                                   T_Blend:           N_ContinuePipe  } }
  N_Alias:        { base: N_ChannelEnd,   trans: { T_Alias:           N_ChannelEnd    } }
  N_Via:          { base: N_Alias,        trans: { T_Via:             N_Alias         } }
  N_Decor:        { base: N_Via,          trans: { T_As:              N_Via           } }
  N_Filter:       { base: N_Decor,        trans: { T_FilterSignal:    N_Decor         ,
                                                   T_FilterProperty:  N_Alias         } }
  N_Repeat:       { base: N_MaybeChannel, trans: { T_Repeat:          N_MaybeChannel  } }
  N_Main:         { base: null,           trans: { T_OnTrigger:       N_Repeat        } }
