FROM ubuntu:latest

USER root

RUN apt-get update && \
    apt-get install -y \
    git cmake python3 python3-pip gcc \
    unzip zip wget xz-utils lsb-release \
    software-properties-common gnupg \
    && apt-get clean && rm -rf /var/lib/apt/lists/*

# Install LLVM+Clang
RUN wget https://apt.llvm.org/llvm.sh
RUN chmod u+x llvm.sh
RUN ./llvm.sh 17
RUN clang-17 --version

# Install Bazel
RUN wget https://github.com/bazelbuild/bazel/releases/download/7.4.1/bazel-7.4.1-installer-linux-x86_64.sh
RUN chmod +x bazel-7.4.1-installer-linux-x86_64.sh
RUN ./bazel-7.4.1-installer-linux-x86_64.sh
RUN bazel --version

USER ubuntu

CMD ["bash"]
