/**
 * \file
 * \copyright (c) Copyright 2024-2025 Zenseact AB
 * \license SPDX-License-Identifier: Apache-2.0
 *
 * \details Autogenerated file - do not change!
 *
 * app: codegen.expr
 * template: codegen/expr/templates/zmbt-framework/backends/cxx/src/model/expression_eval_codegen_fn.cpp
 *
 * How to update:
 * 1. Update the template
 * 2. Run `python -m codegen` in the project root
 * 3. Commit changes
 */

#include <cmath>
#include <boost/json.hpp>

#include "zmbt/model/signal_operator_handler.hpp"
#include "zmbt/model/expression.hpp"


namespace zmbt {

boost::json::value zmbt::Expression::eval_CodegenFn(boost::json::value const& x, SignalOperatorHandler const&) const
{
    switch(keyword())
    {
    case Keyword::Sin: return real_to_number(std::sin(boost::json::value_to<double>(x)));
    case Keyword::Cos: return real_to_number(std::cos(boost::json::value_to<double>(x)));
    case Keyword::Tan: return real_to_number(std::tan(boost::json::value_to<double>(x)));
    case Keyword::Asin: return real_to_number(std::asin(boost::json::value_to<double>(x)));
    case Keyword::Acos: return real_to_number(std::acos(boost::json::value_to<double>(x)));
    case Keyword::Atan: return real_to_number(std::atan(boost::json::value_to<double>(x)));
    case Keyword::Sinh: return real_to_number(std::sinh(boost::json::value_to<double>(x)));
    case Keyword::Cosh: return real_to_number(std::cosh(boost::json::value_to<double>(x)));
    case Keyword::Tanh: return real_to_number(std::tanh(boost::json::value_to<double>(x)));
    case Keyword::Asinh: return real_to_number(std::asinh(boost::json::value_to<double>(x)));
    case Keyword::Acosh: return real_to_number(std::acosh(boost::json::value_to<double>(x)));
    case Keyword::Atanh: return real_to_number(std::atanh(boost::json::value_to<double>(x)));
    case Keyword::Exp: return real_to_number(std::exp(boost::json::value_to<double>(x)));
    case Keyword::Erf: return real_to_number(std::erf(boost::json::value_to<double>(x)));
    case Keyword::Erfc: return real_to_number(std::erfc(boost::json::value_to<double>(x)));
    case Keyword::Gamma: return real_to_number(std::tgamma(boost::json::value_to<double>(x)));
    case Keyword::Abs: return real_to_number(std::abs(boost::json::value_to<double>(x)));
    case Keyword::Ceil: return real_to_number(std::ceil(boost::json::value_to<double>(x)));
    case Keyword::Floor: return real_to_number(std::floor(boost::json::value_to<double>(x)));
    case Keyword::Round: return real_to_number(std::round(boost::json::value_to<double>(x)));
    case Keyword::Sqrt: return real_to_number(std::sqrt(boost::json::value_to<double>(x)));
    case Keyword::Sign: return boost::json::value_to<double>(x) >= 0 ? 1 : -1;
    case Keyword::Id: return x;
    case Keyword::Parse: return boost::json::parse(x.as_string());
    case Keyword::Serialize: return {boost::json::serialize(x)};
    case Keyword::C: return params();
    case Keyword::Default: return x.is_null() ? params() : x;
    default:
        throw expression_error("got invalid unary math expression: %s", underlying());
        return nullptr;
    }
}

} // namespace zmbt

